<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Quáº£n lÃ½ sáº£n pháº©m Ä‘áº¥u giÃ¡</title>
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <style>
    .form-inline .form-control {
      width: auto;
      display: inline-block;
    }
    .table th, .table td {
      vertical-align: middle;
      text-align: center;
    }
  </style>
</head>
<body>
<div class="container mt-4">
  <h4 class="mb-3">ğŸ” TÃ¬m kiáº¿m sáº£n pháº©m</h4>

  <form method="get" th:action="@{/products}" class="row g-3 align-items-center mb-3">
    <div class="col-md-3">
      <input type="text" name="name" th:value="${name}" placeholder="Nháº­p tÃªn sáº£n pháº©m"
             class="form-control">
    </div>
    <div class="col-md-2">
      <input type="number" name="price" th:value="${price}" placeholder="Nháº­p giÃ¡ báº¯t Ä‘áº§u"
             class="form-control">
    </div>
    <div class="col-md-2">
      <select name="categoryId" class="form-control">
        <option th:value="" th:selected="${categoryId == null or categoryId == ''}">--Chá»n--</option>
        <option th:each="c : ${categories}"
                th:value="${c.cid}"
                th:text="${c.name}"
                th:selected="${categoryId == ${c.cid}}"></option>
      </select>

    </div>
    <div class="col-md-1">
      <input type="checkbox" onclick="location.href='@{/products}'"/> XÃ³a tÃ¬m kiáº¿m
    </div>
    <div class="col-md-2">
      <button type="submit" class="btn btn-primary">ğŸ” TÃ¬m</button>
    </div>
    <div class="col-md-2 text-end">
      <a class="btn btn-dark" th:href="@{/products/create}">â• ThÃªm Sáº£n Pháº©m</a>
    </div>
  </form>

  <!-- Báº£ng danh sÃ¡ch -->
  <form method="post" th:action="@{/products/delete}">
    <table class="table table-bordered table-striped">
      <thead class="table-primary">
      <tr>
        <th>STT</th>
        <th>Chá»n</th>
        <th>TÃªn Sáº£n Pháº©m</th>
        <th>GiÃ¡ báº¯t Ä‘áº§u</th>
        <th>Loáº¡i sáº£n pháº©m</th>
        <th>TÃ¬nh tráº¡ng</th>
        <th>HÃ nh Ä‘á»™ng</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="p, iter : ${productPage.content}">
        <td th:text="${iter.index + 1 + productPage.number * productPage.size}">1</td>
        <td><input type="checkbox" name="ids" th:value="${p.id}"/></td>
        <td th:text="${p.name}">iPhone</td>
        <td th:text="${#numbers.formatDecimal(p.price, 0, 'POINT', 0, 'COMMA')} + ' VND'">120.000 VND</td>
        <td th:text="${p.category.name}">Äiá»‡n thoáº¡i</td>
        <td th:text="${p.status}">Chá» duyá»‡t</td>
        <td>
          <a class="btn btn-link" th:href="@{/products/edit/{id}(id=${p.id})}">âœï¸ Sá»­a</a>
        </td>
      </tr>
      </tbody>
    </table>

    <div class="d-flex justify-content-between">
      <button class="btn btn-danger"
              onclick="return confirm('Báº¡n cÃ³ muá»‘n xÃ³a táº¥t cáº£ sáº£n pháº©m Ä‘Ã£ chá»n?')">ğŸ—‘ï¸ XÃ³a
      </button>
    </div>
  </form>

  <!-- PhÃ¢n trang -->
  <nav th:if="${productPage.totalPages > 1}" class="mt-3">
    <ul class="pagination justify-content-center">
      <li class="page-item" th:classappend="${productPage.first} ? 'disabled'">
        <a class="page-link"
           th:href="@{/products(page=${productPage.number - 1}, name=${name}, price=${price}, categoryId=${categoryId})}">Â«</a>
      </li>
      <li th:each="i : ${#numbers.sequence(0, productPage.totalPages - 1)}"
          class="page-item" th:classappend="${i == productPage.number} ? 'active'">
        <a class="page-link"
           th:href="@{/products(page=${i}, name=${name}, price=${price}, categoryId=${categoryId})}"
           th:text="${i + 1}">1</a>
      </li>
      <li class="page-item" th:classappend="${productPage.last} ? 'disabled'">
        <a class="page-link"
           th:href="@{/products(page=${productPage.number + 1}, name=${name}, price=${price}, categoryId=${categoryId})}">Â»</a>
      </li>
    </ul>
  </nav>
</div>
</body>
</html>
